<table class="container" mat-table *ngIf="selectedIds | async; let selectedRecordIds" #table [dataSource]="dataSource"
       matSort matSortActive="receivedAt" matSortDirection="desc" matSortDisableClear>

  <ng-container matColumnDef="receivedAt">
    <th mat-header-cell fxFlex="150px" *matHeaderCellDef mat-sort-header start="desc"> Datum</th>
    <td mat-cell fxFlex="150px" *matCellDef="let element"> {{element.receivedAt | date:'short'}}</td>
  </ng-container>

  <ng-container matColumnDef="sender">
    <th mat-header-cell fxFlex="70px" *matHeaderCellDef mat-sort-header> Sender</th>
    <td mat-cell fxFlex="70px" *matCellDef="let element"> {{element.sender}}</td>
  </ng-container>

  <ng-container matColumnDef="numpages">
    <th mat-header-cell fxFlex="50px" *matHeaderCellDef> Seiten</th>
    <td mat-cell fxFlex="50px" *matCellDef="let element"> {{element.pages.length}}</td>
  </ng-container>

  <ng-container matColumnDef="comment">
    <th mat-header-cell *matHeaderCellDef> Kommentar</th>
    <td mat-cell *matCellDef="let element" [matTooltip]="element.comment"> {{ (element.comment.length>6)?
      (element.comment
      | slice:0:12)+'...':(element.comment)}}
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell fxFlex="40px" *matHeaderCellDef></th>
    <td mat-cell fxFlex="40px" class="action-group" *matCellDef="let element">
      <app-action-menu [record]="element"
                       (deleteRecord)="deleteRecord($event)"
                       (changeStatus)="setStatus($event)"
                       (editRecord)="openEditor($event)"></app-action-menu>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selectRow(row)" (dblclick)="editRecord(row)"
      [class.selected]="isSelected(selectedRecordIds, row && row.id)" draggable droppable [dragData]="row"
      [dragScope]="'record'"
      [dropScope]="'record'" (onDrop)="drop(row, $event)" (drop)="$event.preventDefault()"></tr>
</table>
